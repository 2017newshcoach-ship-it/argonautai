# Architecture Refactor Proposal: 5-Step vs 3-Step

## 🛑 현재의 문제점 (Why 5 steps fail)
현재 5단계 구조는 **"전화기 게임(Chain of Telephone)"**과 같습니다.
Step 1의 정보가 Step 5까지 도달하려면 4번의 "전달(Handshake)"을 거쳐야 합니다.

1. **JSON 파싱 피로도**: 중간 단계(제목, 목차, 핵심문장)마다 AI에게 엄격한 JSON을 요구합니다. 여기서 메타 데이터(`[Mode P]`) 하나만 껴도 에러가 터집니다.
2. **문맥 소실**: Step 1에서 설정한 '타겟 독자'가 Step 3, 4를 거치며 희석됩니다. (방금 겪으신 문제)
3. **사용자 피로도**: 사용자가 5번이나 "Next"를 누르고 기다려야 합니다.

---

## ✅ 제안: 3단계 통합 모델 (The "Compact" Workflow)

5단계를 **"설정(Input) -> 기획(Blueprinting) -> 실행(Execution)"**의 3단계로 압축합니다.

### New Step 1: Strategy & Keyword (설정 및 키워드)
*   **통합 내용**: 플랫폼 선택 + 타겟 서정 + 주제 입력 + **키워드 자동 추천 및 선택**
*   **변경점**: 한 화면에서 "어떤 글을 누구에게 쓸지" 확정하고 넘어갑니다.

### New Step 2: The Architect (설계) **[CORE CHANGE]**
*   **통합 내용**: **제목(Title) + 논리 흐름(Flow) + 목차(Outline) + 핵심 문장(Key Sentences)**
*   **변경점**: 
    *   AI가 이 4가지를 한 번에 생각해서 **"기획안(Blueprint)"** 형태로 제안합니다.
    *   사용자는 **단 하나의 "기획안 카드"**를 보고 수정/승인합니다.
    *   **이점**: 제목과 목차가 따로 놀지 않습니다. AI가 "이 제목이니까 이 목차로 가야지"라고 한 번에 사고하므로 논리적 완결성이 훨씬 높아집니다.
    *   **기술적 이점**: JSON 파싱을 3번 할 걸 1번만 하면 되므로 **에러 확률이 66% 감소**합니다.

### New Step 3: The Writer (집필)
*   **내용**: 확정된 기획안을 바탕으로 글 작성 (기존과 동일하되, 입력값이 훨씬 강력해짐)

---

## 📊 기대 효과 (Impact Analysis)

| 구분 | 기존 (5 Steps) | 변경 (3 Steps) |
| :--- | :--- | :--- |
| **LLM 호출 횟수** | 5회 (Keyword, Title, Outline, KeySentence, Writing) | **3회** (Keyword, Blueprint, Writing) |
| **에러 포인트** | 4곳 (중간 연결마다 파싱 위험) | **2곳** (연결 단순화) |
| **문맥 유지력** | 낮음 (단계별로 정보 누락 가능성) | **최상** (기획 단계에서 모든 문맥 동기화) |
| **사용자 경험** | "언제 끝나지?" (지루함) | "설계하고 바로 쓰네?" (속도감) |

## 🚀 결론
**"구조를 다시 짜야 하는 게 아닐까?"라는 직관은 정확하십니다.**
현재의 잦은 에러는 프롬프트의 문제가 아니라, **너무 잘게 쪼개진 파이프라인의 구조적 비용**입니다.
3단계로 리팩토링하면 **안정성**과 **퀄리티** 모두 획기적으로 개선될 것입니다.
